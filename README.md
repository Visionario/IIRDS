Ingress Intel Remote Desktop Screenshot (IIRDS)
====================================
Take an screenshot (JPG) of a Intel Map using a map link like https://www.ingress.com/intel?ll=8.289024,-62.742648&z=14 and send to you.

Useful if you are mobile with your smartphone and not have a PC

IIRDS - 0.5 beta

by Agent VisX (E) - Venezuela

If you like this please say hi!! on intel COMM


NOTES: IIRDS was made initially for use in my 'Raspberry Pi' and it is very optimized for it. Was tested on Ubuntu and Lubuntu running inside a Virtual Box and is really cool!!

# Requirement
Midori Browser

`sudo apt-get install midori`

ImageMagick

`sudo apt-get install imagemagick`


Xvfb

`sudo apt-get install xvfb`

# Installing
1. Install midori browser and run for first time
2. Login to http://ingress.com/intel with your credentials and check if you can open any map
3. Close Midori
4. Copy directory `~/.config/midori` to your directory and rename to `midori_config_base` (its save your credentials and cookies inside)


# Usage

###Config
See `iirds.sh` and change 
```
HOMEPAGE="YOUR-DEFAULT-HOMPAGE"
SENDTO="YOUREMAIL@YOURDOMAIN.COM"
```

If you need other resolution by default please change

```
SCREEN_W=1920
SCREEN_H=1080
```

Test it on 4096x4096 it´s so cool!!

### Options
```
	-w width, default $SCREEN_W
	-h height, default $SCREEN_H
	-l (Map link) default $HOMEPAGE
	-d delay to capture (segs) 
	-e email to send screenshot, default $SENDTO
```

### Planning and future...
For Raspberry Pi, minimal use of resources and memory

Timelapse... i'm working on it

Translate all code to Python to run on flask webserver, actually it works, please see below:

### Running in Python with Webserver (Flask)

Create a python file with this code:

```
from flask import Flask, request
import subprocess

app = Flask(__name__)


@app.route('/', methods=['GET', 'POST'])
def index():
    if request.method == 'POST':
		map=request.form['map']
		do_screenshot_noecho(map)
		return "Processing map " + map + "</br> sending to you in 90 secs"

    if request.method == 'GET':
		h=request.args.get('map', '')
		z=request.args.get('z', '')
		return (h + " " + z + '''
			<h3><a>Ingress Intel Remote Desktop Screenshot (IIRDS)</a></h3>
			<form method="post" action="">
			<input name="map" style="width: 400px;" type="text" maxlength="255" value="" /> </br>
			<input type="submit" name="submit" value="Screenshot" />
			<div id="footer">
				Generated by IIRDS
			</div>
			''')

def do_screenshot_noecho(map):
	cmd = "./iirds.sh -l " + map
	p = subprocess.Popen(cmd , shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
	p.wait()
	

	
def do_screenshot(map):
	cmd = "./iirds.sh -l " + map
	p = subprocess.Popen(cmd, shell=True, stderr=subprocess.PIPE)
	while True:
		out = p.stderr.read(1)
		if out == '' and p.poll() != None:
			break
		if out != '':
			sys.stdout.write(out)
			sys.stdout.flush()		
			
	
if __name__ == "__main__":
    app.run(host='0.0.0.0', port=5000, debug=True)
```




### Some notes...
Se habla español